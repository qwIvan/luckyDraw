//抽奖人员名单
var allPerson = "130****2792;139****5376;白国超;蔡贝壕;蔡波;蔡惠婷;蔡静;蔡立宇;蔡日骏;蔡文昌;蔡雪梅;蔡泽聪;曹畅;曹春壮;曹书凡;曹向宇;曹兴光;曾楚龙;曾广济;曾嘉伟;曾康;曾麓源;曾强;曾仕元;曾忪;曾祥栋;曾志浩;柴晶晶;产革宏;陈粉玉;陈根祥;陈耿鹏;陈观钦;陈海滨;陈昊东;陈健雄;陈键锋;陈江华;陈金栋;陈俊浩;陈俊兴;陈凯;陈克胜;陈昆鹏;陈美仪;陈培达;陈钦涛;陈荣权;陈声钰;陈帅飞;陈土燊;陈文鸿;陈晓波;陈晓东;陈晓炯;陈彦好;陈宇浩;陈苑韬;陈泽浩;陈震宇;陈之聪;盛威龄;程超;程命沆;池颉;崔永昌;代忠杰;戴杰;邓博;邓昌勇;邓成杨;邓慧;邓嘉荣;邓健;邓竣膑;邓朝星;翟立庆;翟慎文;刁荣浩;董银;杜猛;段碧伟;段洁斐;段金宝;段燚涛;范先生;方林圳;方明;方清湛;方文顶;方先生;冯春龄;冯加刚;冯静懿;冯丽钊;冯鹏航;冯世黔;冯艺武;符海青;付瑞琦;付钰;甘强;甘水宝;高滈;高济宇;高凌钢;高文鹏;古向楠;顾家齐;顾凌锐;顾庆华;关尔先生;关为;关旭晨;关裕韬;官凌云;郭莉莉;郭涛;郭泽文;韩斌;韩东宇;韩旭(2301);韩旭(7987);韩朝;郝俊楠;何岸;何高山;何乐;何力铮;何武昭;何鑫;何颖;何贞铝;何志君;贺晨;贺大钊;贺志虎;贺志香;洪耿斌;洪嘉灏;洪先生;洪旭彦;侯启家;侯茹厚;侯万吉;胡会明;胡俊杰;胡琦;胡庆;胡生;胡圣然;胡涛;胡文超;胡文馨;胡勇强;黄波;黄东鸿;黄恩教;黄海茗;黄海奇;黄华贵;黄嘉;黄建雍;黄恺;黄岚星;黄理;黄龙(2127);黄龙(2598);黄明明;黄孙明;黄炜杰;黄颖彪;黄勇其;黄誉俨;黄增光;黄政夫;霍佩诗;霍文艺;吉诺;贾亚龙;简松;简智华;姜军;姜星;江宝添;江川;江锦良;江俊超;江夏秋;金凯;金炼城;金巍;金茁;瞿捷;凯文;康强;孔立明;赖健辉;赖建国;兰必钟;兰坤;蓝朝浩;黎毅麟;黎原朝;黎梓贤;李保林;李炳烨;李大鹏;李飞;李福骄;李钢;李涵;李浩南;李华;李华优;李化良;李洁;李金亮;李开睿;李恺;李澜;李莉;李林煌;李林珊;李凌云;李明中;李锐;李时燕;李树青;李思凡;李小龙;李小强;李鑫;李雅芬;李翌玄;李艺聪;李莹;李禹陈;李远超;李云;李泽杰;李振明;李争;李志伟;李智君;李仲效;李子杰;李子强;丽萨;荔枝;连少华;梁超杰;梁枫;梁嘉聪;梁建斌;梁仟;梁仕钢;梁文君;梁沃标;梁宇;梁志锋;梁卓希;廖东鸣;廖林君;廖佩;林达浩;林韩超;林杭杭;林焕彬;林绵生;林群彬;林婷;林曦;林雪平;林伊琦;林艺;林泽銮;林志聪;林卓烽;林梓钿;凌晨;凌虓威;刘翅鹏;刘楚文;刘典昆;刘昊;刘昊天;刘华浩;刘佳;刘倞;刘礼恒;刘立彬;刘亮希;刘龙龙;刘琼;刘全祥;刘荣;刘世晴;刘思倩;刘嵩;刘巍;刘卫;刘锡锋;刘鑫;刘旭东;刘洋;刘一枫;刘颖;刘允庆;刘朝阳;刘志红;龙康才;龙绍华;龙贤胜;龙泽锋;卢汉;卢俊;卢育发;卢之睿;盧怡芳;陆光焕;陆焕强;陆洋;罗滨;罗成;罗罡;罗广镇;罗宏坤;罗洪运;罗红;罗世俊;罗毅;罗正丁;罗志龙;罗志晓;骆春辉;骆海涛;马渝泽;明红宴;莫宝明;莫鹏程;莫少政;莫志贤;南洋;欧广钊;欧阳朋;潘泰仰;庞有振;庞忠迅;裴迎;彭晨;彭城富;彭雷;彭冕;彭权;彭思杰;彭维源;彭先生(9547);彭先生(2336);彭一青;彭朝亮;普欲晓;戚旭祥;祁文盛;齐雅婷;钱平;钱巍;钱雯;覃振南;任涛;任星宇;戎晓鹏;阮聪;阮梓昱;少虞;绍铭;沈世鹏;沈小倩;沈悦;施俊杰;施啸天;石宝源;石文轩;宋海诚;宋环宇;宋青松;宋志材;苏钧涛;苏小雅;孙王斌;孙亚熙;谭海洋;谭灏南;汤颖;汤勇;唐博;唐丰领;唐昊;唐立;唐伟;唐迎亚;陶谨;陶勇;田雨;童巧平;涂小丽;万成文杰;万健行;汪斌;汪雄;王斌;王冰冰;王博;王成强;王皓天;王辉(2086);王辉(3305);王江;王凯;王坤;王来华;王立;王立兴;王亮;王林;王鹏威;王森;王莎莎;王涛;王万林;王伟;王伟超;王炜;王喜;王新新;王勇;王远方;王云娇;王泽林;王仲弟;王洲洋;王子勤;王族;王kk;望金鹏;威阳;韦星宁;卫振超;魏万顺;温楚雄;温德刚;温建涛;温文铿;温小姐;文涛;巫文杰;巫仲庆;邬惺;吴邦;吴博君;吴翠婷;吴红林;吴嘉骅;吴江宁;吴锦城;吴景新;吴居茂;吴亮;吴芦峰;吴念熹;吴鹏;吴启东;吴骞;吴嗣浩;吴晓滨;吴烨昌;武元炜;向万良;小吴;小余;肖炳阳;肖博;肖丰;肖欢;肖利;肖蜜;肖森;肖文棣;肖宇晴;肖朝军;谢秋发;谢舒翼;谢思;谢天;谢晓萍;谢正财;谢灼贤;邢远航;熊峰;熊恒;熊洪刚;徐保金;徐浩森;徐杰;徐林杰;徐明浩;徐铭岳;许炜;许小杰;许译丹;许智恒;鄢仁谦;鄢显富;严小雨;杨博竣;杨城;杨迪波;杨观荣;杨广;杨国钦;杨鸿斌;杨佳锐;杨建华;杨杰;杨洁;杨倩;杨帅;杨添喆;杨文婷;杨习敏;杨小言;杨飏;杨梓烈;阳飞;阳慧玥;姚美君;姚星河;叶苇;叶远;尹泽豪;永君;于超望;于顺昌;余熙平;余一;余意;余昀;袁硕彬;袁天颖;袁元安;袁卓豪;岳磊;詹佳伟;战伟;张才龙;张成;张盛翔;张传昊;张鼎华;张峰荣;张富强;张广哲;张桂华;张海;张浩然;张皓;张衡雨;张健;张杰(2308);张杰(8361);张俊刚;张密;张敏;张南麒;张妮;张宁;张奇;张清田;张如诗;张树悦;张思奇;张斯奇;张文杰;张先生(9452);张先生(5064);张先生(9114);张向北;张小吉;张晓倩;张兴华;张学飞;张迅雷;张岩;张懿麒;张逸飞;张湲;张跃飞;张展康;张喆;张正;张志华;张子贺;章深鹏;赵兵;赵博弘;赵毅;赵育文;赵志翔;郑兵;郑达;郑飞杰;郑嘉铠;郑江;郑锦昱;郑武豪;郑艺林;郑育俊;郑泽贵;郑宗胜;支鹏磊;钟山;钟一玄;钟有博;钟兆玮;钟志勇;周碧菡;周奋彦;周皓隽;周华;周欢;周戬;周培林;周鹏;周润隆;周生;周伟辉;周旭东;周颖;周展旭;周志龙;周子淇;朱炳飞;朱聪;朱光强;朱光宇;朱恒成;朱剑;朱傑;朱丽君;朱镕军;朱维忠;朱颖;朱越鹏;朱振峰;朱志鹏;祝濮文;卓圣楷;卓新苗;邹泽桦;左峰;左涛;abvatous;Albert江;alice;Allen218;AMBER;cassie;Category;cece;EdenLee;Elsa Chan;Eric;FAN YINGHA;Ivy Lin;jacob;Javier;Joe;Joe Zeng;Kevin;kingkoma;Leo Lee;Longhao;LO SIU CHU;Luckyjayce;Matt_Hoo;Paul Wang;peter;Pinger;Richy Guo;Rina;rosalind;Sam;Sander Huang;TorresNg;weiyf;XN;yang.xp;Yeung;Zoya";
//领导人员名单
var leaderArr = [];
//未中奖人员名单
var remainPerson = allPerson.toString().split(";");
//中奖人员名单
var luckyMan = [];
var timer;//定时器
var times = 1;//抽奖次数,如果不是第一次，不加粗显示领导姓名
$(function () {
    iconAnimation();
    //开始抽奖
    $("#btnStart").on("click", function () {
        //判断是开始还是结束
        if ($("#btnStart").text() === "开始") {
            if (!$("#txtNum").val()) {
                showDialog("请输入中奖人数");
                return false;
            }
            if ($("#txtNum").val() > 49) {
                showDialog("一次最多只能输入49人");
                return false;
            }
            if ($("#txtNum").val() > remainPerson.length) {
                showDialog("当前抽奖人数大于奖池总人数<br>当前抽奖人数：<b>" + $("#txtNum").val() + "</b>人,奖池人数：<b>" + remainPerson.length + "</b>人");
                return false;
            }
            $("#result").fadeOut();
            //显示动画框，隐藏中奖框
            $("#luckyDrawing").show().next().addClass("hide");
            move();
            $("#btnStart").text("停止");
            $("#bgLuckyDrawEnd").removeClass("bg");
        }
        else {
            $("#btnStart").text("开始");//设置按钮文本为开始
            var luckyDrawNum = $("#txtNum").val();
            startLuckDraw();//抽奖开始

            $("#luckyDrawing").fadeOut();
            clearInterval(timer);//停止输入框动画展示
            $("#luckyDrawing").val(luckyMan[luckyMan.length - 1]);//输入框显示最后一个中奖名字
            $("#result").fadeIn().find("div").removeClass().addClass("p" + luckyDrawNum);//隐藏输入框，显示中奖框
            $("#bgLuckyDrawEnd").addClass("bg");//添加中奖背景光辉
            $("#txtNum").attr("placeholder", "输入中奖人数(" + remainPerson.length + ")");
        }
    });

    $("#btnReset").on("click", function () {
        //确认重置对话框
        var confirmReset = false;
        showConfirm("确认重置吗？所有已中奖的人会重新回到抽奖池！", function () {
            //熏置未中奖人员名单
            remainPerson = allPerson.toString().split(";");
            //中奖人数框置空
            $("#txtNum").val("").attr("placeholder", "请输入中奖人数");
            $("#showName").val("");
            //隐藏中奖名单,然后显示抽奖框
            $("#result").fadeOut();//.prev().fadeIn()
            $("#bgLuckyDrawEnd").removeClass("bg");//移除背景光辉
            times++;
            console.log(times);

        });
    });
});

//抽奖主程序
function startLuckDraw() {
    //抽奖人数
    var luckyDrawNum = $("#txtNum").val();
    if (luckyDrawNum > remainPerson.length) {
        alert("抽奖人数大于奖池人数！请修改人数。或者点重置开始将新一轮抽奖！");
        return false;
    }
    //随机中奖人
    var randomPerson = getRandomArrayElements(remainPerson, luckyDrawNum);
    var tempHtml = "";
    $.each(randomPerson, function (i, person) {
        if (leaderArr.indexOf(person) > -1 && times == 1) {
            tempHtml += "<span><b>" + person + "</b></span>";
        }
        else {
            tempHtml += "<span>" + person + "</span>";
        }
    });
    $("#result>div").html(tempHtml);
    //剩余人数剔除已中奖名单
    remainPerson = remainPerson.delete(randomPerson);
    //中奖人员
    luckyMan = luckyMan.concat(randomPerson);
    //设置抽奖人数框数字为空
    $("#txtNum").val("");
}

//参考这篇文章：http://www.html-js.com/article/JS-rookie-rookie-learned-to-fly-in-a-moving-frame-beating-figures
//跳动的数字
function move() {
    var $showName = $("#showName"); //显示内容的input的ID
    var interTime = 30;//设置间隔时间
    timer = setInterval(function () {
        var i = GetRandomNum(0, remainPerson.length);
        $showName.val(remainPerson[i]);//输入框赋值
    }, interTime);
}

//顶上的小图标，随机动画
function iconAnimation() {
    var interTime = 200;//设置间隔时间
    var $icon = $("#iconDiv>span");
    var arrAnimatoin = ["bounce", "flash", "pulse", "rubberBand", "shake", "swing", "wobble", "tada"];
    var timer2 = setInterval(function () {
        var i = GetRandomNum(0, $icon.length);
        var j = GetRandomNum(0, arrAnimatoin.length);
        //console.log("i:" + i + ",j:" + j);
        $($icon[i]).removeClass().stop().addClass("animated " + arrAnimatoin[j]);//输入框赋值
    }, interTime);

}
